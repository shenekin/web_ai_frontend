CSS 优先级决定了当多个样式规则应用于同一个 HTML 元素时，哪个规则的样式会生效。理解 CSS 优先级对于编写可预测和可维护的样式表至关重要。

### 优先级规则

CSS 优先级的基本规则如下（按优先级从高到低排列）：

1.  **!important 声明：** 标记为 `!important` 的样式声明会覆盖任何其他声明，无论其优先级如何。虽然 `!important` 可以快速解决样式冲突，但过度使用会使样式表难以维护和调试。
2.  **内联样式：** 直接在 HTML 元素中定义的样式（例如，`<p style="color: blue;">`）具有很高的优先级，会覆盖外部样式表中的样式。
3.  **ID 选择器：** ID 选择器（例如，`#myElement`）比类选择器、属性选择器和伪类选择器具有更高的优先级。
4.  **类选择器、属性选择器和伪类选择器：** 这三种选择器具有相同的优先级。如果它们应用于同一个元素，则在样式表中后定义的规则会生效。
    *   类选择器：例如，`.myClass`
    *   属性选择器：例如，`[type="text"]`
    *   伪类选择器：例如，`:hover`、`:focus`
5.  **元素选择器和伪元素选择器：** 元素选择器（例如，`p`、`div`）和伪元素选择器（例如，`::before`、`::after`）的优先级较低。
6.  **继承的样式：** 如果一个元素没有显式地应用样式，它会继承其父元素的某些样式属性。继承的样式具有最低的优先级，会被任何显式定义的样式覆盖。
7.  **通用选择器：** 通用选择器（`*`）的优先级为 0，它选择页面上的所有元素。

### 优先级计算

为了更精确地确定样式的优先级，可以将选择器表示为四个值的组合（A、B、C、D），其中：

*   **A：** 如果样式是内联样式，则为 1，否则为 0。
*   **B：** ID 选择器的数量。
*   **C：** 类选择器、属性选择器和伪类选择器的数量。
*   **D：** 元素选择器和伪元素选择器的数量。

将这四个值连接起来形成一个数字，该数字表示选择器的优先级。例如：

*   `* {}` → (0, 0, 0, 0) = 0
*   `li {}` → (0, 0, 0, 1) = 1
*   `li:first-line {}` → (0, 0, 1, 2) = 12
*   `ul li {}` → (0, 0, 0, 2) = 2
*   `ul ol li {}` → (0, 0, 0, 3) = 3
*   `.list {}` → (0, 0, 1, 0) = 10
*   `li.list {}` → (0, 0, 1, 1) = 11
*   `li:hover {}` → (0, 0, 1, 1) = 11
*   `ul ol li.list {}` → (0, 0, 1, 3) = 13
*   `#list {}` → (0, 1, 0, 0) = 100
*   `ul #list {}` → (0, 1, 0, 1) = 101
*   `style=""` → (1, 0, 0, 0) = 1000

具有较高优先级的选择器（数值较大）将覆盖具有较低优先级的选择器。

### 示例

考虑以下 HTML 和 CSS 代码：

```html
<div id="myDiv" class="container">
  <p style="color: green;">This is a paragraph.</p>
</div>
```

```css
p {
  color: red; /* 元素选择器 */
}

.container p {
  color: blue; /* 类选择器 + 元素选择器 */
}

#myDiv p {
  color: orange; /* ID 选择器 + 元素选择器 */
}
```

在这个例子中，段落的文本颜色将是绿色，因为内联样式具有最高的优先级。如果移除内联样式，文本颜色将是橙色，因为 ID 选择器 `#myDiv p` 比类选择器 `.container p` 和元素选择器 `p` 具有更高的优先级。

### 最佳实践

*   **避免使用 `!important`：** 尽量通过合理的选择器和样式表结构来管理优先级，而不是依赖 `!important`。
*   **保持选择器简洁：** 避免使用过于复杂的选择器，因为它们会增加样式的特异性，使样式表难以维护。
*   **使用类选择器：** 类选择器提供了一个很好的平衡，可以在不牺牲可维护性的前提下实现足够的特异性。
*   **遵循一致的命名约定：** 使用清晰和一致的命名约定可以更容易地理解和维护样式表。
*   **使用 CSS 预处理器：** CSS 预处理器（如 Sass 或 Less）可以帮助你更好地组织和管理样式表，减少样式冲突。
*   **文档化你的 CSS：** 编写清晰的注释可以帮助你和其他开发人员理解样式的用途和优先级。

理解和掌握 CSS 优先级是成为一名高效的 Web 开发人员的关键。通过遵循这些规则和最佳实践，你可以编写出可预测、可维护和易于理解的样式表。